<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>core.correlation Module &mdash; scikit-beam 0.0.7 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootswatch-3.3.4/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.0.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="scikit-beam 0.0.7 documentation" href="../../../index.html" />
    <link rel="up" title="Complete Reference (API)" href="../index.html" />
    <link rel="next" title="core.dpc Module" href="dpc.html" />
    <link rel="prev" title="core.cdi Module" href="cdi.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          scikit-beam</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.7</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../tutorial.html">Tutorial</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction to scikit-beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installing scikit-beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html#updating-your-installation">Updating Your Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../whats_new.html">What&#8217;s new</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Complete Reference (API)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">Tutorial with Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Generate_ROI_labeled_arrays.html">Generate Region of Interests (ROI) labeled arrays for simple shapes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/dpc_demo.html">Differential Phase Contrast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Histogram2D-RingAveraging.html">Using two histograms to bin in space and time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Histogram2D.html">Computing a 2D histogram using Histogram object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/histogram3D.html">3D histogramming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/IXS-alignment-clean.html">Alignment and interpolation of inelastic scattering data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/D_estimate_demo.html">[broken] An <strong>almost</strong> correct diffraction calibration notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/recip_example.html">This is an example of using real experimental data to plot the HK plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/X-ray_Speckle_Visibility_Spectroscopy.html">X-ray Speckle Visibility Spectroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/speckle-plotting.html">Plotting helper functions for Speckle analysis &#8211; <code class="docutils literal"><span class="pre">xray_vision.mpl_plotting.speckle</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Check_remove_bad_imgs_using_same_image.html">Remove bad images for one time correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Multi_tau_one_time_correlation_example.html">One Time Correlation Example for NIPA_GEL 250K¶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/Removing_bad_images_one_time_correlation.html">Removing bad images from images set and get the one time correlation data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/XPCS_fitting_with_lmfit.html">XPCS fitting with lmfit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/partial-multi-tau.html">First, let&#8217;s demo with synthetic data.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/partial-multi-tau.html#show-the-correlator-working-with-synthetic-data">Show the correlator working with synthetic data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/partial-multi-tau.html#now-let-s-do-it-with-some-real-data">Now let&#8217;s do it with some real data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/two-time-correlation.html">Two time correlation example notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/plot_xrf_spectrum.html">Using X-ray fluorescence information in scikit-beam</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">core.correlation</span></code> Module</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="module-skbeam.core.correlation">
<span id="core-correlation-module"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">core.correlation</span></code> Module<a class="headerlink" href="#module-skbeam.core.correlation" title="Permalink to this headline">¶</a></h1>
<p>This module is for functions specific to time correlation</p>
<dl class="function">
<dt id="skbeam.core.correlation.auto_corr_scat_factor">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">auto_corr_scat_factor</code><span class="sig-paren">(</span><em>lags</em>, <em>beta</em>, <em>relaxation_rate</em>, <em>baseline=1</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.correlation.auto_corr_scat_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>This model will provide normalized intensity-intensity time
correlation data to be minimized.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>lags</strong> : array</p>
<blockquote>
<div><p>delay time</p>
</div></blockquote>
<p><strong>beta</strong> : float</p>
<blockquote>
<div><p>optical contrast (speckle contrast), a sample-independent
beamline parameter</p>
</div></blockquote>
<p><strong>relaxation_rate</strong> : float</p>
<blockquote>
<div><p>relaxation time associated with the samples dynamics.</p>
</div></blockquote>
<p><strong>baseline</strong> : float, optional</p>
<blockquote>
<div><p>baseline of one time correlation
equal to one for ergodic samples</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>g2</strong> : array</p>
<blockquote class="last">
<div><p>normalized intensity-intensity time autocorreltion</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[R6]</a></td><td>L. Li, P. Kwasniewski, D. Orsi, L. Wiegart, L. Cristofolini,
C. Caronna and A. Fluerasu, &#8221; Photon statistics and speckle
visibility spectroscopy with partially coherent X-rays,&#8221;
J. Synchrotron Rad. vol 21, p 1288-1295, 2014</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.correlation.lazy_one_time">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">lazy_one_time</code><span class="sig-paren">(</span><em>image_iterable</em>, <em>num_levels</em>, <em>num_bufs</em>, <em>labels</em>, <em>internal_state=None</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.correlation.lazy_one_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator implementation of 1-time multi-tau correlation</p>
<blockquote>
<div>If you do not want multi-tau correlation, set num_levels to 1 and
num_bufs to the number of images you wish to correlate</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image_iterable</strong> : iterable of 2D arrays</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>num_levels <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">how many generations of downsampling to perform, i.e., the depth of
the binomial tree of averaged frames</p>
</dd>
<dt>num_bufs <span class="classifier-delimiter">:</span> <span class="classifier">int, must be even</span></dt>
<dd><p class="first last">maximum lag step to compute in each generation of downsampling</p>
</dd>
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Labeled array of the same shape as the image stack.
Each ROI is represented by sequential integers starting at one.  For
example, if you have four ROIs, they must be labeled 1, 2, 3,
4. Background is labeled as 0</p>
</dd>
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Labeled array of the same shape as the image stack.
Each ROI is represented by sequential integers starting at one.  For
example, if you have four ROIs, they must be labeled 1, 2, 3,
4. Background is labeled as 0</p>
</dd>
<dt>internal_state <span class="classifier-delimiter">:</span> <span class="classifier">namedtuple, optional</span></dt>
<dd><p class="first last">internal_state is a bucket for all of the internal state of the
generator. It is part of the <cite>results</cite> object that is yielded from
this generator</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>rac{&lt;I(q, t)I(q, t + t&#8217;)&gt; }{&lt;I(q, t)&gt;^2}</p>
<blockquote>
<div><p>; t&#8217; &gt; 0</p>
<p>Here, I(q, t) refers to the scattering strength at the momentum
transfer vector q in reciprocal space at time t, and the brackets
&lt;...&gt; refer to averages over time t. The quantity t&#8217; denotes the
delay time</p>
<p>This implementation is based on published work. [R7]</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.correlation.lazy_two_time">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">lazy_two_time</code><span class="sig-paren">(</span><em>labels</em>, <em>images</em>, <em>num_frames</em>, <em>num_bufs</em>, <em>num_levels=1</em>, <em>two_time_internal_state=None</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.correlation.lazy_two_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator implementation of two-time correlation</p>
<blockquote>
<div><p>If you do not want multi-tau correlation, set num_levels to 1 and
num_bufs to the number of images you wish to correlate</p>
<p>Multi-tau correlation uses a scheme to achieve long-time correlations
inexpensively by downsampling the data, iteratively combining successive
frames.</p>
<p>The longest lag time computed is num_levels * num_bufs.
** see comments on multi_tau_auto_corr</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>labels</strong> : array</p>
<blockquote class="last">
<div><blockquote>
<div><p>labeled array of the same shape as the image stack;
each ROI is represented by a distinct label (i.e., integer)</p>
</div></blockquote>
<dl class="docutils">
<dt>images <span class="classifier-delimiter">:</span> <span class="classifier">iterable of 2D arrays</span></dt>
<dd><p class="first last">dimensions are: (rr, cc), iterable of 2D arrays</p>
</dd>
<dt>num_frames <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of images to use
default is number of images</p>
</dd>
<dt>num_bufs <span class="classifier-delimiter">:</span> <span class="classifier">int, must be even</span></dt>
<dd><p class="first last">maximum lag step to compute in each generation of
downsampling</p>
</dd>
<dt>num_levels <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">how many generations of downsampling to perform, i.e.,
the depth of the binomial tree of averaged frames
default is one</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>rac{&lt;I(q, t_1)I(q, t_2)&gt;_pix }{&lt;I(q, t_1)&gt;_pix &lt;I(q, t_2)&gt;_pix}</p>
<blockquote>
<div>Here, the ensemble averages are performed over many pixels of detector,
all having the same q value. The average time or age is equal to (t1+t2)/2,
measured by the distance along the t1 = t2 diagonal.
The time difference t = <a href="#id3"><span class="problematic" id="id4">|t1 - t2|</span></a>, with is distance from the t1 = t2
diagonal in the perpendicular direction.
In the equilibrium system, the two-time correlation functions depend only
on the time difference t, and hence the two-time correlation contour lines
are parallel.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.correlation.multi_tau_auto_corr">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">multi_tau_auto_corr</code><span class="sig-paren">(</span><em>num_levels</em>, <em>num_bufs</em>, <em>labels</em>, <em>images</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.correlation.multi_tau_auto_corr" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps generator implementation of multi-tau</p>
<p>Original code(in Yorick) for multi tau auto correlation
author: Mark Sutton</p>
<p>See docstring for lazy_one_time</p>
</dd></dl>

<dl class="attribute">
<dt id="skbeam.core.correlation.results">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">results</code><a class="headerlink" href="#skbeam.core.correlation.results" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">correlation_results</span></code></p>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.correlation.two_time_corr">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">two_time_corr</code><span class="sig-paren">(</span><em>labels</em>, <em>images</em>, <em>num_frames</em>, <em>num_bufs</em>, <em>num_levels=1</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.correlation.two_time_corr" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps generator implementation of multi-tau two time correlation</p>
<p>This function computes two-time correlation
Original code : author: Yugang Zhang</p>
<p>See docstring for lazy_two_time</p>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.correlation.two_time_state_to_results">
<code class="descclassname">skbeam.core.correlation.</code><code class="descname">two_time_state_to_results</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.correlation.two_time_state_to_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the internal state of the two time generator into usable results</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>state</strong> : namedtuple</p>
<blockquote>
<div><p>The internal state that is yielded from <cite>lazy_two_time</cite></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>results</strong> : namedtuple</p>
<blockquote class="last">
<div><p>A results object that contains the two time correlation results
and the lag steps</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../../_sources/resource/api/core/correlation.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2014-2015 Brookhaven National Lab.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>